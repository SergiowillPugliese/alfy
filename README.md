# 🏠 Alfy - Home Management App

## 🎯 Vision & Concetto

**Alfy** è un'applicazione per la gestione completa della vita domestica e familiare. L'obiettivo è centralizzare tutte le attività quotidiane di una famiglia in un'unica app intuitiva e moderna.

### 🎪 Il Nome
"Alfy" deriva da "Alfred", il maggiordomo di Batman - rappresenta l'assistente digitale perfetto che si prende cura di tutti i dettagli della gestione domestica.

## 🌟 Funzionalità Core

### 📋 **Liste della Spesa** (Implementato)
- ✅ Creazione e gestione liste multiple
- ✅ Aggiunta/rimozione articoli  
- ✅ Segna come acquistato/non acquistato
- 🔄 **TODO**: Condivisione familiare
- 🔄 **TODO**: Prodotti preferiti e suggerimenti
- 🔄 **TODO**: Categorizzazione automatica
- 🔄 **TODO**: Integrazione con negozi online

### 👥 **Gestione Multi-Utente & Famiglia** (Da Implementare)
- **Profili Utente**: Ogni membro ha il suo profilo personalizzato
- **Famiglia Condivisa**: Creazione/join di gruppi familiari
- **Permessi Granulari**: 
  - Contenuti personali (solo utente)
  - Contenuti familiari (tutti i membri)
  - Ruoli admin/membro
- **Dashboard Personalizzate**: Vista filtrata per ogni utente

### 📅 **Calendar & Appuntamenti** (Da Implementare)
- **Appuntamenti Personali**: Medico, lavoro, hobby
- **Eventi Familiari**: Compleanni, vacanze, riunioni scolastiche
- **Promemoria Intelligenti**: Notifiche mirate
- **Integrazione Calendario**: Sync con Google/Apple Calendar
- **Recurring Events**: Gestione eventi ricorrenti

### ⏰ **Scadenze & Reminder** (Da Implementare)
- **Scadenze Domestiche**: Bollette, assicurazioni, controlli
- **Scadenze Personali**: Documenti, certificazioni
- **Smart Notifications**: 
  - Notifiche individuali per scadenze personali
  - Broadcast familiare per scadenze condivise
  - Escalation se non gestite
- **Templates**: Scadenze ricorrenti pre-impostate

### 💰 **Smart Money Manager - Il Videogame delle Finanze** (🎯 In Sviluppo)
> *"Trasforma la gestione delle tue finanze in un'avventura coinvolgente con il tuo AI Financial Coach personale!"*

#### **🤖 Alfy AI Coach - Il Tuo Consulente Finanziario Amico**
> *"La filosofia del risparmio intelligente: ottimizza senza rinunciare a ciò che ami!"*

##### **🧠 Filosofia "Smart Savings, Not Sacrifice"**
- **Spese Intoccabili**: *"Il tuo affitto è 500€? Perfetto, questa cifra non si tocca!"*
- **Ottimizzazione Intelligente**: *"Ami i ristoranti? Troviamo posti nuovi con miglior rapporto qualità-prezzo!"*
- **Priorità Personali**: Impara cosa è importante per te e lo rispetta sempre
- **Risparmio Sostenibile**: *"Non si tratta di privazioni, ma di scelte più smart!"*

##### **🚨 Crisis Management & Emergency Response**
- **Rilevamento Automatico**: Identifica spese impreviste e ricalcola tutto istantaneamente
- **Piani di Recovery**: *"Spesa imprevista di 400€? Ecco 3 modi per recuperare in 2 mesi senza stress"*
- **Adattamento Dinamico**: Riorganizza obiettivi e budget in base a nuove situazioni
- **Supporto Emotivo**: *"Gli imprevisti capitano! Insieme troviamo la soluzione migliore"*

##### **🎯 Coaching Personalizzato & Motivazionale**
- **Personalità Adattiva**: Impara il tuo stile comunicativo e si adatta al tuo carattere
- **Consigli Proattivi**: *"Hai speso molto in caffè questo mese. Conosci quel bar carino vicino casa con cappuccino a 1.20€?"*
- **Celebrazioni Autentiche**: *"🎉 Incredibile! Con questa ottimizzazione hai accelerato il tuo obiettivo vacanze di 3 settimane!"*
- **Tone of Voice**: Amichevole, motivante e mai giudicante - come un amico esperto

#### **🎮 Gamification & Achievement System**
- **Livelli Saver**: Da "Principiante" a "Money Master" con XP e unlock
- **Badge Collection**: 50+ achievement per ogni traguardo (es: "First 100€ Saved", "Budget Ninja", "Goal Crusher")
- **Streak System**: Giorni consecutivi sotto budget con moltiplicatori bonus
- **Monthly Challenges**: *"Sfida Dicembre: Risparmia 200€ per i regali senza sforare il budget!"*
- **Leaderboard Famiglia**: Competizione amichevole tra membri (opzionale)
- **Milestone Celebrations**: Animazioni e reward virtuali per traguardi raggiunti

#### **🎯 Sistema Obiettivi di Risparmio Intelligente**
- **Goal Wizard**: Creazione guidata con calcoli automatici e strategie personalizzate
- **Multi-Goal Management**: Gestisci più obiettivi simultanei con priorità dinamiche
- **Smart Scenarios**: *"Se risparmi 50€ in meno sui ristoranti, raggiungi l'obiettivo 2 mesi prima!"*
- **Auto-Savings**: Trasferimenti automatici basati su surplus o regole personalizzate
- **Progress Tracking**: Visualizzazione avanzamento con proiezioni e milestone
- **Goal Types**: Vacanze, auto, casa, emergenze, investimenti, hobby

#### **📊 Analytics Predittive & Insights**
- **Spending DNA**: Analisi profonda dei tuoi pattern di spesa unici
- **Trend Forecasting**: *"Basandomi sui tuoi dati, a Natale spenderai circa 15% in più"*
- **Budget Optimization**: Suggerimenti AI per ottimizzare allocazioni
- **Anomaly Detection**: *"Attenzione: spesa insolita rilevata in 'Trasporti'"*
- **Seasonal Intelligence**: Adatta budget e consigli alle stagioni
- **ROI Tracking**: Misura l'efficacia delle tue strategie di risparmio

#### **💡 Features Intelligenti**

##### **🔍 Sistema di Classificazione Spese Avanzato**
- **Spese Fisse Obbligatorie**: Affitto, mutuo, assicurazioni → *"Queste non le tocchiamo!"*
- **Spese Fisse Opzionali**: Abbonamenti, palestra → *"Possiamo ottimizzare o sostituire"*
- **Spese Variabili Essenziali**: Spesa alimentare, carburante → *"Necessarie ma ottimizzabili"*
- **Spese Variabili Lifestyle**: Ristoranti, hobby, svago → *"Il tuo divertimento è importante, troviamo alternative smart!"*
- **Spese Impulso**: Shopping non pianificato → *"Qui possiamo lavorare insieme sui trigger"*

##### **🤖 AI-Powered Intelligence**
- **Smart Categorization**: ML per auto-classificare spese con apprendimento continuo
- **Expense Prediction**: *"Basandomi sui tuoi pattern, questa settimana spenderai circa 80€ per la spesa"*
- **Optimization Opportunities**: *"Hai speso 45€ in caffè questo mese. Ho trovato 3 bar vicini con prezzi migliori!"*
- **Seasonal Intelligence**: *"A dicembre spendi il 20% in più per regali. Iniziamo a pianificare?"*
- **Anomaly Detection**: *"Spesa insolita rilevata: 150€ in farmacia. Tutto ok? Aggiusto il budget di conseguenza"*

##### **⚡ Quick & Smart Actions**
- **3-Second Expense Entry**: Foto scontrino + OCR automatico
- **Voice Commands**: *"Alfy, ho speso 25€ per pranzo"*
- **Smart Suggestions**: Consigli contestuali basati su location e orario
- **Family Sync**: Condivisione intelligente spese e obiettivi familiari

#### **🏆 Progression System**
- **Saver Levels**: Sistema XP con unlock di features avanzate
- **Skill Trees**: Specializzazioni (Budget Master, Goal Achiever, Analytics Pro)
- **Daily Quests**: *"Oggi: registra 3 spese, rimani sotto budget, contribuisci a 1 obiettivo"*
- **Weekly Challenges**: Obiettivi settimanali personalizzati
- **Monthly Themes**: *"Novembre è il mese del risparmio energetico!"*
- **Achievement Showcase**: Profilo pubblico con i tuoi successi (opzionale)

#### **🎭 Esempi Pratici della Filosofia Alfy**

##### **📊 Scenario: Analisi Mensile Intelligente**
```
💰 Le tue spese di Marzo:
├── 🏠 Affitto: 500€ → ✅ "Spesa fissa, non la tocchiamo!"
├── 🍕 Ristoranti: 180€ → 💡 "Ami mangiare fuori! Ho trovato 5 nuovi posti con ottimo rapporto qualità-prezzo"
├── ☕ Caffè: 45€ → 🎯 "Sfida: scopri 3 bar nuovi con cappuccino sotto 1.50€"
├── 🚗 Carburante: 120€ → 📍 "Hai 2 distributori più economici sul tuo tragitto casa-lavoro"
└── 🎬 Svago: 80€ → 🎮 "I tuoi hobby sono importanti! Questo mese hai sbloccato il badge 'Life Enjoyer'"
```

##### **🚨 Scenario: Gestione Emergenza**
```
⚠️ Spesa imprevista rilevata: Riparazione auto 400€

🤖 Alfy Coach: "Niente panico! Gli imprevisti capitano. Ecco il mio piano per recuperare:"

📋 Piano di Recovery (2 mesi):
├── ☕ Caffè: -20€/mese → "Porta il thermos 3 giorni a settimana"
├── 🍕 Delivery: -30€/mese → "Cuciniamo insieme! Ho ricette veloci da 15 minuti"
├── 🎬 Streaming: -15€/mese → "Pausa Netflix per 2 mesi? Hai quella lista di libri da leggere!"
└── 💡 Extra: +25€/mese → "Vendi quei vestiti che non usi più su Vinted"

🎯 Risultato: Obiettivo 'Vacanze' ritardato solo di 3 settimane invece di 3 mesi!
💪 Messaggio: "Vedi? Con piccoli aggiustamenti smart risolviamo tutto!"
```

##### **🎯 Scenario: Accelerazione Obiettivo**
```
🏖️ Obiettivo: Vacanze Estate (1.500€) - Mancano 4 mesi

🤖 Alfy Coach: "Vuoi accelerare? Ho un'idea geniale!"

💡 Opportunity Spotting:
├── 🚗 Carpooling: +40€/mese → "I tuoi colleghi vanno nella tua direzione"
├── 🍳 Meal Prep: +60€/mese → "Domenica cooking session? Risparmio + salute!"
├── 🏃 Running: +50€/mese → "Sostituisci palestra con corsa al parco per 2 mesi"
└── 📱 App Cashback: +20€/mese → "Ti segnalo le migliori offerte sui tuoi acquisti"

🚀 Risultato: Raggiungi l'obiettivo 1.5 mesi prima!
🎉 Bonus: "Hai anche migliorato la tua forma fisica!"
```

### 🔔 **Sistema Notifiche Avanzato** (Da Implementare)
- **Push Notifications**: Promemoria in tempo reale
- **In-App Notifications**: Centro notifiche interno
- **Email Digest**: Riassunto settimanale attività
- **Smart Scheduling**: Notifiche basate su abitudini utente
- **Quiet Hours**: Modalità silenziosa per fasce orarie

## 🏗️ Architettura Tecnica

### **Architettura Monorepo con Nx**
Il progetto utilizza **Nx Workspace** per gestire un monorepo con architettura a microfrontend:

```
alfy/
├── apps/
│   ├── alfy-fe/          # Shell principale (Angular)
│   ├── mfShopping/       # Microfrontend Shopping Lists
│   ├── mfExpenses/       # Microfrontend Smart Money Manager
│   ├── alfy-be/          # Backend API (NestJS)
│   └── alfy-be-e2e/      # Test E2E backend
├── libs/
│   └── alfy-shared-lib/  # Libreria condivisa
└── dist/                 # Build artifacts
```

### **Patterns Architetturali**
- **Microfrontend Architecture**: Applicazioni modulari e indipendenti
- **Module Federation**: Sharing di codice tra microfrontend
- **Clean Architecture**: Separazione domini, use case, infrastructure
- **Angular Signals**: State management reattivo
- **Standalone Components**: Approccio moderno Angular
- **Repository Pattern**: Astrazione data access
- **Dependency Injection**: IoC container Angular e NestJS

### **Tech Stack**

#### **Frontend**
- **Framework**: Angular 20+ con Standalone Components
- **Architettura**: Microfrontend con Module Federation
- **State Management**: Angular Signals + RxJS
- **Styling**: PrimeNG
- **Forms**: Reactive Forms
- **Build**: Webpack con Module Federation
- **Monorepo**: Nx Workspace

#### **Backend** 
- **Framework**: NestJS con TypeScript
- **Architecture**: Modular con Clean Architecture
- **Database**: TypeORM (configurabile)
- **API**: RESTful con OpenAPI/Swagger
- **Validation**: Class Validator + Class Transformer
- **Testing**: Jest

#### **Shared**
- **Library**: Nx shared library per tipi, servizi e componenti comuni
- **API Client**: Generato automaticamente con Orval da OpenAPI
- **Interceptors**: Gestione errori e autenticazione centralizzata

#### **DevOps & Tooling**
- **Monorepo**: Nx 21.3.6 con npm
- **Testing**: Jest + Testing Library
- **Linting**: ESLint con configurazioni condivise
- **Build**: Nx build system con caching
- **Code Generation**: Nx generators per consistenza

### **Struttura Applicazioni**

#### **alfy-fe (Shell Application)**
- **Ruolo**: Application shell principale che orchestrا i microfrontend
- **Responsabilità**: Routing, layout comune, autenticazione
- **Tecnologie**: Angular + Module Federation

#### **mfShopping (Microfrontend)**
- **Ruolo**: Gestione completa delle liste della spesa
- **Features**: CRUD liste, gestione articoli, interfaccia shopping
- **Esposizione**: Moduli e route esportati via Module Federation

#### **mfExpenses (Microfrontend)**
- **Ruolo**: Smart Money Manager con AI Coach integrato
- **Features**: Expense tracking, obiettivi risparmio, analytics predittive, gamification
- **AI Integration**: Alfy Coach per consigli personalizzati e coaching motivazionale
- **Gamification**: Sistema XP, achievement, challenges e progression
- **Esposizione**: Moduli e route esportati via Module Federation

#### **alfy-be (Backend API)**
- **Ruolo**: API REST per tutti i servizi con AI Intelligence integrata
- **Architettura**: NestJS con moduli per dominio (shopping-list, expenses, savings-goals, etc.)
- **Features**: CRUD operations, validazione, documentazione OpenAPI
- **AI Modules**: 
  - Smart Expense Classification (spese fisse vs ottimizzabili)
  - Emergency Management System (gestione imprevisti)
  - AI Coach Personality Engine (consigli personalizzati)
  - Predictive Analytics (forecasting e pattern recognition)

#### **alfy-shared-lib (Shared Library)**
- **Ruolo**: Codice condiviso tra applicazioni
- **Contenuto**: 
  - Servizi API generati automaticamente
  - Componenti UI comuni
  - Interceptors e utilities
  - Tipi TypeScript condivisi

### **Comandi di Sviluppo**

```bash
# Installazione dipendenze
npm install

# Sviluppo (tutti i servizi in parallelo)
npm run start:all

# Sviluppo singole applicazioni
nx serve alfy-fe          # Frontend shell
nx serve mfShopping       # Microfrontend shopping
nx serve mfExpenses       # Microfrontend smart money manager
nx serve alfy-be          # Backend API

# Build
nx build alfy-fe --prod   # Build produzione frontend
nx build alfy-be --prod   # Build produzione backend
nx build alfy-shared-lib  # Build libreria condivisa

# Testing
nx test alfy-fe           # Test frontend
nx test alfy-be           # Test backend
nx e2e alfy-be-e2e        # Test E2E

# Linting
nx lint alfy-fe           # Lint frontend
nx lint alfy-be           # Lint backend

# Generazione API client (da OpenAPI)
npm run generate:api      # Rigenera client da schema OpenAPI

# Visualizzazione dependency graph
nx graph                  # Mostra grafo delle dipendenze
```

## 📱 User Experience

### **Navigation Flow**
```
🏠 Dashboard
├── 📋 Shopping Lists
│   ├── My Lists
│   ├── Family Lists  
│   └── Shared Items
├── 📅 Calendar
│   ├── Personal Events
│   ├── Family Events
│   └── Deadlines
├── 💰 Smart Money Manager
│   ├── 🎮 Alfy Coach Dashboard
│   ├── 💸 Quick Expense Entry
│   ├── 🎯 Savings Goals
│   ├── 📊 Analytics & Insights
│   ├── 🏆 Achievements & Progress
│   ├── 💡 AI Suggestions
│   └── 📈 Reports & Forecasts
├── 🔔 Notifications
└── ⚙️ Settings
    ├── Profile
    ├── Family Management
    ├── AI Coach Preferences
    └── Gamification Settings
```

### **Key User Journeys**

#### **Nuovo Utente**
1. Download app → Onboarding → Registrazione
2. Setup profilo → Crea famiglia o join esistente
3. Tutorial guidato → Prime configurazioni
4. Prima lista spesa → Primo appuntamento

#### **Uso Quotidiano Famiglia**
1. **Morning Ritual**: Check dashboard + daily quest da Alfy Coach
2. **Quick Expense**: Registrazione spese in tempo reale (3 secondi)
3. **AI Insights**: Alfy suggerisce ottimizzazioni durante la giornata
4. **Shopping Sync**: Update shopping list + tracking budget spesa
5. **Evening Review**: Check progress obiettivi + celebration achievement
6. **Weekend Planning**: Analisi settimanale + setup nuove challenge

#### **Gamified Money Journey**
1. **Onboarding Gamificato**: Tutorial interattivo con primi achievement
2. **Daily Engagement**: Quest giornaliere + streak tracking
3. **Progress Celebration**: Milestone raggiunti con animazioni e reward
4. **AI Coaching**: Consigli personalizzati basati su comportamenti
5. **Long-term Goals**: Tracking obiettivi con visualizzazioni motivanti

## 🚀 Roadmap di Sviluppo

### **Phase 0: Architettura & Foundation (✅ Completato)**
- [x] Setup Nx monorepo workspace
- [x] Architettura microfrontend con Module Federation
- [x] Backend NestJS con architettura modulare
- [x] Shared library per codice comune
- [x] Sistema build e development workflow
- [x] Generazione automatica API client da OpenAPI

### **Phase 1: Shopping Lists Core (✅ In Corso)**
- [x] CRUD shopping lists (Backend API)
- [x] Interfaccia gestione liste (Frontend)
- [x] Gestione articoli con unità di misura
- [ ] Ottimizzazione UX e responsive design
- [ ] Sistema autenticazione (JWT)
- [ ] Gestione profili utente
- [ ] Refactor per supporto multi-user

### **Phase 2: Calendar & Notifications (Q2 2024)**
- [ ] Gestione appuntamenti personali/familiari
- [ ] Sistema scadenze con reminder
- [ ] Push notifications (Capacitor)
- [ ] In-app notification center
- [ ] Integrazione calendario nativo

### **Phase 3: Smart Money Manager - Il Videogame delle Finanze (🎯 Priorità Alta)**
- [ ] **Backend Core**: Moduli Expense, SavingsGoal, Budget, Analytics
- [ ] **AI Coach Foundation**: Sistema consigli personalizzati e coaching
- [ ] **Gamification Engine**: XP, achievement, challenges, progression system
- [ ] **Expense Tracking**: Registrazione rapida con smart categorization
- [ ] **Savings Goals**: Wizard creazione + tracking multi-obiettivo
- [ ] **Analytics Dashboard**: Insights predittivi e spending patterns
- [ ] **Achievement System**: Badge, streak, leaderboard famiglia
- [ ] **AI Personality**: Tone of voice adattivo e celebrazioni
- [ ] **Mobile-First UX**: Quick capture e gesture intuitive

### **Phase 4: Advanced Features (Q4 2024)**
- [ ] AI suggestions per shopping list
- [ ] Geofencing per reminder location-based
- [ ] Integrazione assistenti vocali
- [ ] Dark mode & accessibility
- [ ] Multi-language support

### **Phase 5: Ecosystem (2025)**
- [ ] API pubbliche per integrazioni
- [ ] Web app companion
- [ ] Smart home integrations
- [ ] Marketplace template/plugins
- [ ] Community features

## 🎨 Design System

### **Color Palette**
- **Primary**: `#5D9B9B` (Teal calmo e affidabile)
- **Secondary**: `#F1C40F` (Giallo energico per azioni)
- **Success**: `#22C55E` (Verde per conferme)
- **Accent**: `#1ABC9C` (Azzurro per highlights)

### **Typography**
- **Headings**: Roboto Bold
- **Body**: Roboto Regular  
- **UI Elements**: Roboto Medium

### **Component Library**
- Basato su Ionic Design System
- Custom components per business logic
- Responsive design mobile-first
- Gestures native (swipe, pull-to-refresh)

## 📊 Metriche di Successo

### **Engagement**
- Daily Active Users (DAU)
- Session duration media
- Feature adoption rate
- Retention rate (1/7/30 giorni)

### **Business Value**
- Tempo risparmiato per famiglia/settimana
- Accuratezza gestione budget (+25% target)
- Riduzione spese impulso (-30% target)
- Stress reduction index (survey)
- **Gamification Impact**: Achievement completion rate (>80% target)
- **AI Coach Effectiveness**: User satisfaction con consigli (>4.5/5 target)
- **Savings Goals Success**: Percentuale obiettivi raggiunti (>70% target)
- **Engagement Boost**: Sessioni giornaliere per gamification (+50% target)

### **Technical**
- App performance (startup time < 2s)
- Crash rate < 0.1%
- API response time < 500ms
- Offline capability

## 🔮 Vision a Lungo Termine

**Alfy** diventerà il **"sistema operativo della famiglia moderna"** - l'unico punto di accesso per gestire tutti gli aspetti della vita domestica con intelligence artificiale che impara dalle abitudini familiari e suggerisce ottimizzazioni proattive.

### **Integrazione Ecosystem**
- **Smart Home**: Integrazione IoT (luci, termostato, sicurezza)
- **E-commerce**: Auto-ordering prodotti finiti
- **Services**: Booking automatico servizi (pulizie, riparazioni)
- **Financial**: Sincronizzazione conti e investimenti familiari

---

## 🛠️ Stato Attuale del Progetto

**Architettura**: ✅ Nx Monorepo con Microfrontend  
**Backend**: ✅ NestJS con moduli shopping-list  
**Frontend**: ✅ Angular Shell + Microfrontend Shopping  
**Shared Library**: ✅ API client e componenti comuni  
**Development Workflow**: ✅ Completamente funzionante  
**Smart Money Manager**: 🎯 **Prossimo Focus** - Microfrontend mfExpenses ready per sviluppo

Il progetto ha migrato con successo da Ionic a un'architettura moderna basata su **Nx workspace** con **microfrontend Angular** e **backend NestJS**. La struttura attuale permette scalabilità, manutenibilità e sviluppo parallelo di features indipendenti.

### **🎮 Next: Smart Money Manager**
Il prossimo step è implementare il **videogame delle finanze personali** con:
- 🤖 **Alfy AI Coach**: Il consulente finanziario amico che ti motiva
- 🎯 **Gamification**: Sistema XP, achievement e challenges per rendere il risparmio divertente
- 📊 **Analytics Predittive**: Insights intelligenti per ottimizzare le tue finanze
- 🏆 **Goal Achievement**: Trasforma i tuoi sogni in obiettivi raggiungibili

---

*Ultimo aggiornamento: 14 Settembre 2025*  
*Versione documento: 3.0 - Smart Money Manager & AI Coach* 